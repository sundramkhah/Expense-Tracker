<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Pro Expense Tracker — Advanced (Fixed)</title>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/a2d9f6c9b1.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <link rel="stylesheet" href="styl.css">

</head>

<body>
    <div class="topbar">
        <div class="brand">
            <div class="logo">EX</div>
            <div>
                <div class="title">Pro Expense Tracker</div>
                <div class="muted" style="font-size:13px">Smart budgeting & expense insights</div>
            </div>
        </div>

        <div class="actions">
            <button id="btn-theme" class="btn btn-ghost small"><i id="theme-icon"
                    class="fa-regular fa-moon"></i>Theme</button>
            <div id="user-area"></div>
        </div>
    </div>

    <div class="layout">
        <div class="panel">
            <div class="card">
                <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
                    <div><strong id="form-title">Add Transaction</strong>
                        <div class="muted" style="font-size:12px">Quickly add income & expenses</div>
                    </div>
                    <div id="logged-user" class="muted" style="font-size:13px"></div>
                </div>

                <div style="margin-bottom:8px">
                    <div class="form-grid">
                        <div>
                            <label>Type</label>
                            <select id="tx-type">
                                <option value="Expense">Expense</option>
                                <option value="Income">Income</option>
                            </select>
                        </div>
                        <div>
                            <label>Category</label>
                            <select id="tx-category">
                                <option>Food</option>
                                <option>Transport</option>
                                <option>Rent</option>
                                <option>Bills</option>
                                <option>Groceries</option>
                                <option>Entertainment</option>
                                <option>Salary</option>
                                <option>Other</option>
                            </select>
                        </div>

                        <div>
                            <label>Amount</label>
                            <input id="tx-amount" type="number" step="0.01" placeholder="0.00">
                        </div>
                        <div>
                            <label>Date</label>
                            <input id="tx-date" type="date">
                        </div>

                        <div style="grid-column: 1 / -1">
                            <label>Notes</label>
                            <textarea id="tx-notes" placeholder="Optional note (e.g., dinner with friends)"></textarea>
                        </div>

                        <div>
                            <label>Recurring</label>
                            <select id="tx-recurring">
                                <option value="none">None</option>
                                <option value="monthly">Monthly</option>
                            </select>
                        </div>

                        <div style="display:flex;align-items:center;gap:8px">
                            <button id="btn-save" class="btn btn-primary">Add</button>
                            <button id="btn-cancel" class="btn btn-ghost">Clear</button>
                        </div>
                    </div>
                </div>

                <div style="display:flex;gap:8px;margin-top:6px;align-items:center">
                    <button id="btn-export-csv" class="btn small">Export CSV</button>
                    <button id="btn-export-json" class="btn small">Export JSON</button>
                    <label for="import-file" class="btn small btn-ghost" style="cursor:pointer">Import JSON</label>
                    <input id="import-file" type="file" accept="application/json" style="display:none">
                    <button id="btn-clear-all" class="btn small"
                        style="margin-left:auto;background:#fee2e2;color:#b91c1c">Clear All</button>
                </div>
            </div>

            <div class="card">
                <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
                    <strong>Overview</strong>
                    <div class="muted">This month</div>
                </div>
                <div class="summary">
                    <div class="stat">
                        <div class="icon" style="background:linear-gradient(90deg,#0288d1,#4db6ac)"><i
                                class="fa-solid fa-wallet"></i></div>
                        <div>
                            <div class="num" id="sum-balance">0.00</div>
                            <div class="lbl">Balance</div>
                        </div>
                    </div>

                    <div class="stat">
                        <div class="icon" style="background:linear-gradient(90deg,#43a047,#66bb6a)"><i
                                class="fa-solid fa-coins"></i></div>
                        <div>
                            <div class="num" id="sum-income">0.00</div>
                            <div class="lbl">Income</div>
                        </div>
                    </div>

                    <div class="stat">
                        <div class="icon" style="background:linear-gradient(90deg,#f59e0b,#f97316)"><i
                                class="fa-solid fa-credit-card"></i></div>
                        <div>
                            <div class="num" id="sum-expense">0.00</div>
                            <div class="lbl">Expense</div>
                        </div>
                    </div>

                    <div class="stat">
                        <div class="icon" style="background:linear-gradient(90deg,#ef4444,#ef6c6c)"><i
                                class="fa-solid fa-bullseye"></i></div>
                        <div>
                            <div class="num muted" id="budget-amount">0.00</div>
                            <div class="lbl">Monthly Budget</div>
                        </div>
                    </div>
                </div>

                <div style="margin-top:10px">
                    <label style="font-size:12px;color:var(--muted)">Set monthly budget</label>
                    <div style="display:flex;gap:8px;margin-top:6px">
                        <input id="budget-input" type="number" placeholder="e.g., 15000" style="flex:1">
                        <button id="btn-budget-set" class="btn btn-primary">Set</button>
                    </div>
                    <div style="margin-top:8px">
                        <div class="progress">
                            <div id="budget-bar" class="bar" style="width:0%"></div>
                        </div>
                        <div style="display:flex;justify-content:space-between;margin-top:6px">
                            <div class="muted small">Used</div>
                            <div id="budget-used" class="muted small">0%</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
                    <strong>Search & Filter</strong>
                    <div class="muted small">Refine results</div>
                </div>

                <div class="filters" style="margin-bottom:8px">
                    <input id="search-input" type="search" placeholder="Search description or category...">
                    <select id="filter-type">
                        <option value="all">All</option>
                        <option value="Expense">Expense</option>
                        <option value="Income">Income</option>
                    </select>
                    <select id="filter-category">
                        <option value="all">All categories</option>
                        <option>Food</option>
                        <option>Transport</option>
                        <option>Rent</option>
                        <option>Bills</option>
                        <option>Groceries</option>
                        <option>Entertainment</option>
                        <option>Salary</option>
                        <option>Other</option>
                    </select>
                    <input id="filter-start" type="date">
                    <input id="filter-end" type="date">
                    <button id="btn-filter-apply" class="btn small btn-primary">Apply</button>
                    <button id="btn-filter-clear" class="btn small btn-ghost">Clear</button>
                </div>
            </div>
        </div>

        <div class="dashboard">
            <div class="card charts">
                <div style="padding:6px">
                    <strong>Charts</strong>
                    <div class="muted small">Spending breakdown & monthly trend</div>
                    <div style="height:12px"></div>
                    <canvas id="lineChart" style="background:transparent;margin-bottom:6px"></canvas>
                </div>

                <div style="padding:6px">
                    <canvas id="pieChart" width="420" height="300"></canvas>
                </div>
            </div>

            <div class="card">
                <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
                    <strong>Recent Transactions</strong>
                    <div class="muted small">Latest 10</div>
                </div>

                <div id="recent-list"></div>

                <table class="table" style="margin-top:8px">
                    <thead>
                        <tr>
                            <th>Category</th>
                            <th>Notes</th>
                            <th>Amount</th>
                            <th>Date</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="txn-table-body"></tbody>
                </table>
            </div>
        </div>
    </div>

    <div id="login-modal" class="modal" style="display:none">
        <div class="modal-card">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
                <strong>Sign in / Sign up</strong>
                <div class="muted small">Local demo auth</div>
            </div>
            <div style="margin-bottom:8px">
                <label>Username</label>
                <input id="auth-username" type="text" placeholder="choose a username">
            </div>
            <div style="margin-bottom:12px">
                <label>Password</label>
                <input id="auth-password" type="password" placeholder="password (stored locally)">
            </div>
            <div style="display:flex;gap:8px">
                <button id="btn-signup" class="btn btn-primary">Sign up</button>
                <button id="btn-login" class="btn btn-ghost">Log in</button>
            </div>
            <div class="muted small" style="margin-top:10px">
                Note: This demo stores credentials in browser localStorage (not secure) — use only for testing.
            </div>
        </div>
    </div>

    <div id="toast" class="toast"></div>

    <script src="scrip.js"></script>
</body>

</html>
